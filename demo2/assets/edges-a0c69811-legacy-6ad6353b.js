!function(){function t(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */t=function(){return r};var r={},e=Object.prototype,a=e.hasOwnProperty,n=Object.defineProperty||function(t,r,e){t[r]=e.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function d(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{d({},"")}catch(C){d=function(t,r,e){return t[r]=e}}function h(t,r,e,a){var i=r&&r.prototype instanceof p?r:p,o=Object.create(i.prototype),s=new T(a||[]);return n(o,"_invoke",{value:L(t,e,s)}),o}function u(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(C){return{type:"throw",arg:C}}}r.wrap=h;var f={};function p(){}function y(){}function g(){}var b={};d(b,s,(function(){return this}));var w=Object.getPrototypeOf,v=w&&w(w(B([])));v&&v!==e&&a.call(v,s)&&(b=v);var x=g.prototype=p.prototype=Object.create(b);function m(t){["next","throw","return"].forEach((function(r){d(t,r,(function(t){return this._invoke(r,t)}))}))}function k(t,r){function e(n,i,s,c){var l=u(t[n],t,i);if("throw"!==l.type){var d=l.arg,h=d.value;return h&&"object"==o(h)&&a.call(h,"__await")?r.resolve(h.__await).then((function(t){e("next",t,s,c)}),(function(t){e("throw",t,s,c)})):r.resolve(h).then((function(t){d.value=t,s(d)}),(function(t){return e("throw",t,s,c)}))}c(l.arg)}var i;n(this,"_invoke",{value:function(t,a){function n(){return new r((function(r,n){e(t,a,r,n)}))}return i=i?i.then(n,n):n()}})}function L(t,r,e){var a="suspendedStart";return function(n,i){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===n)throw i;return _()}for(e.method=n,e.arg=i;;){var o=e.delegate;if(o){var s=S(o,e);if(s){if(s===f)continue;return s}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===a)throw a="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);a="executing";var c=u(t,r,e);if("normal"===c.type){if(a=e.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:e.done}}"throw"===c.type&&(a="completed",e.method="throw",e.arg=c.arg)}}}function S(t,r){var e=r.method,a=t.iterator[e];if(void 0===a)return r.delegate=null,"throw"===e&&t.iterator.return&&(r.method="return",r.arg=void 0,S(t,r),"throw"===r.method)||"return"!==e&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+e+"' method")),f;var n=u(a,t.iterator,r.arg);if("throw"===n.type)return r.method="throw",r.arg=n.arg,r.delegate=null,f;var i=n.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,f):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,f)}function E(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function M(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function B(t){if(t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var e=-1,n=function r(){for(;++e<t.length;)if(a.call(t,e))return r.value=t[e],r.done=!1,r;return r.value=void 0,r.done=!0,r};return n.next=n}}return{next:_}}function _(){return{value:void 0,done:!0}}return y.prototype=g,n(x,"constructor",{value:g,configurable:!0}),n(g,"constructor",{value:y,configurable:!0}),y.displayName=d(g,l,"GeneratorFunction"),r.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===y||"GeneratorFunction"===(r.displayName||r.name))},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,d(t,l,"GeneratorFunction")),t.prototype=Object.create(x),t},r.awrap=function(t){return{__await:t}},m(k.prototype),d(k.prototype,c,(function(){return this})),r.AsyncIterator=k,r.async=function(t,e,a,n,i){void 0===i&&(i=Promise);var o=new k(h(t,e,a,n),i);return r.isGeneratorFunction(e)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},m(x),d(x,l,"Generator"),d(x,s,(function(){return this})),d(x,"toString",(function(){return"[object Generator]"})),r.keys=function(t){var r=Object(t),e=[];for(var a in r)e.push(a);return e.reverse(),function t(){for(;e.length;){var a=e.pop();if(a in r)return t.value=a,t.done=!1,t}return t.done=!0,t}},r.values=B,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(M),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function e(e,a){return o.type="throw",o.arg=t,r.next=e,a&&(r.method="next",r.arg=void 0),!!a}for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),c=a.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=r&&r<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=r,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(o)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),f},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),M(e),f}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var a=e.completion;if("throw"===a.type){var n=a.arg;M(e)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,e){return this.delegate={iterator:B(t),resultName:r,nextLoc:e},"next"===this.method&&(this.arg=void 0),f}},r}function r(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||n(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,r,e,a,n,i,o){try{var s=t[i](o),c=s.value}catch(l){return void e(l)}s.done?r(c):Promise.resolve(c).then(a,n)}function a(t){return function(){var r=this,a=arguments;return new Promise((function(n,i){var o=t.apply(r,a);function s(t){e(o,n,i,s,c,"next",t)}function c(t){e(o,n,i,s,c,"throw",t)}s(void 0)}))}}function n(t,r){if(t){if("string"==typeof t)return i(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?i(t,r):void 0}}function i(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,a=new Array(r);e<r;e++)a[e]=t[e];return a}function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}System.register(["./index-legacy-052b3898.js","./createText-b06b2794-legacy-63c470f9.js","./svgDraw-1b15aedc-legacy-fbb131b0.js","./line-53c588d2-legacy-e2d79c27.js"],(function(e,i){"use strict";var s,c,l,d,h,u,f,p,y,g,b;return{setters:[function(t){s=t.aF,c=t.as,l=t.at,d=t.bL,h=t.ax,u=t.ay,f=t.aK,p=t.aS},function(t){y=t.c},function(t){g=t.p},function(t){b=t.l}],execute:function(){var i={extension:function(t,r,e){u.trace("Making markers for ",e),t.append("defs").append("marker").attr("id",r+"-extensionStart").attr("class","marker extension "+r).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),t.append("defs").append("marker").attr("id",r+"-extensionEnd").attr("class","marker extension "+r).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},composition:function(t,r){t.append("defs").append("marker").attr("id",r+"-compositionStart").attr("class","marker composition "+r).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",r+"-compositionEnd").attr("class","marker composition "+r).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},aggregation:function(t,r){t.append("defs").append("marker").attr("id",r+"-aggregationStart").attr("class","marker aggregation "+r).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",r+"-aggregationEnd").attr("class","marker aggregation "+r).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},dependency:function(t,r){t.append("defs").append("marker").attr("id",r+"-dependencyStart").attr("class","marker dependency "+r).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",r+"-dependencyEnd").attr("class","marker dependency "+r).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},lollipop:function(t,r){t.append("defs").append("marker").attr("id",r+"-lollipopStart").attr("class","marker lollipop "+r).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","white").attr("cx",6).attr("cy",7).attr("r",6)},point:function(t,r){t.append("marker").attr("id",r+"-pointEnd").attr("class","marker "+r).attr("viewBox","0 0 10 10").attr("refX",10).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",r+"-pointStart").attr("class","marker "+r).attr("viewBox","0 0 10 10").attr("refX",0).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},circle:function(t,r){t.append("marker").attr("id",r+"-circleEnd").attr("class","marker "+r).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",r+"-circleStart").attr("class","marker "+r).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},cross:function(t,r){t.append("marker").attr("id",r+"-crossEnd").attr("class","marker cross "+r).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),t.append("marker").attr("id",r+"-crossStart").attr("class","marker cross "+r).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},barb:function(t,r){t.append("defs").append("marker").attr("id",r+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","strokeWidth").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")}};e("i",(function(t,r,e,a){r.forEach((function(r){i[r](t,e,a)}))}));var w=e("g",(function(t,r,e,a){var i=t||"";if("object"===o(i)&&(i=i[0]),s(c().flowchart.htmlLabels)){i=i.replace(/\\n|\n/g,"<br />"),u.info("vertexText"+i);var l=function(t){var r,e,a=h(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),n=a.append("xhtml:div"),i=t.label,o=t.isNode?"nodeLabel":"edgeLabel";return n.html('<span class="'+o+'" '+(t.labelStyle?'style="'+t.labelStyle+'"':"")+">"+i+"</span>"),r=n,(e=t.labelStyle)&&r.attr("style",e),n.style("display","inline-block"),n.style("white-space","nowrap"),n.attr("xmlns","http://www.w3.org/1999/xhtml"),a.node()}({isNode:a,label:d(i).replace(/fa[blrs]?:fa-[\w-]+/g,(function(t){return"<i class='".concat(t.replace(":"," "),"'></i>")})),labelStyle:r.replace("fill:","color:")});return l}var f=document.createElementNS("http://www.w3.org/2000/svg","text");f.setAttribute("style",r.replace("color:","fill:"));var p,y=function(t,r){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=n(t))||r&&t&&"number"==typeof t.length){e&&(t=e);var a=0,i=function(){};return{s:i,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,c=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return s=t.done,t},e:function(t){c=!0,o=t},f:function(){try{s||null==e.return||e.return()}finally{if(c)throw o}}}}("string"==typeof i?i.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(i)?i:[]);try{for(y.s();!(p=y.n()).done;){var g=p.value,b=document.createElementNS("http://www.w3.org/2000/svg","tspan");b.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),b.setAttribute("dy","1em"),b.setAttribute("x","0"),e?b.setAttribute("class","title-row"):b.setAttribute("class","row"),b.textContent=g.trim(),f.appendChild(b)}}catch(w){y.e(w)}finally{y.f()}return f})),v=e("l",function(){var e=a(t().mark((function e(a,n,i,o){var u,f,p,g,b,v,x,m,k,L,S,E,M;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(f=n.useHtmlLabels||s(c().flowchart.htmlLabels),u=i||"node default",p=a.insert("g").attr("class",u).attr("id",n.domId||n.id),g=p.insert("g").attr("class","label").attr("style",n.labelStyle),b=void 0===n.labelText?"":"string"==typeof n.labelText?n.labelText:n.labelText[0],v=g.node(),x="markdown"===n.labelType?y(g,l(d(b),c()),{useHtmlLabels:f,width:n.width||c().flowchart.wrappingWidth,classes:"markdown-node-label"}):v.appendChild(w(l(d(b),c()),n.labelStyle,!1,o)),m=x.getBBox(),k=n.padding/2,!s(c().flowchart.htmlLabels)){t.next=20;break}if(L=x.children[0],S=h(x),!(E=L.getElementsByTagName("img"))){t.next=17;break}return M=""===b.replace(/<img[^>]*>/g,"").trim(),t.next=17,Promise.all(r(E).map((function(t){return new Promise((function(r){return t.addEventListener("load",(function(){if(t.style.display="flex",t.style.flexDirection="column",M){var e=c().fontSize?c().fontSize:window.getComputedStyle(document.body).fontSize;t.style.width=5*parseInt(e,10)+"px"}else t.style.width="100%";r(t)}))}))})));case 17:m=L.getBoundingClientRect(),S.attr("width",m.width),S.attr("height",m.height);case 20:return f?g.attr("transform","translate("+-m.width/2+", "+-m.height/2+")"):g.attr("transform","translate(0, "+-m.height/2+")"),n.centerLabel&&g.attr("transform","translate("+-m.width/2+", "+-m.height/2+")"),g.insert("rect",":first-child"),t.abrupt("return",{shapeSvg:p,bbox:m,halfPadding:k,label:g});case 24:case"end":return t.stop()}}),e)})));return function(t,r,a,n){return e.apply(this,arguments)}}()),x=e("u",(function(t,r){var e=r.node().getBBox();t.width=e.width,t.height=e.height}));function m(t,r,e,a){return t.insert("polygon",":first-child").attr("points",a.map((function(t){return t.x+","+t.y})).join(" ")).attr("class","label-container").attr("transform","translate("+-r/2+","+e/2+")")}function k(t,r,e,a){var n=t.x,i=t.y,o=n-a.x,s=i-a.y,c=Math.sqrt(r*r*s*s+e*e*o*o),l=Math.abs(r*e*o/c);a.x<n&&(l=-l);var d=Math.abs(r*e*s/c);return a.y<i&&(d=-d),{x:n+l,y:i+d}}function L(t,r,e,a){var n,i,o,s,c,l,d,h,u,f,p,y,g;if(n=r.y-t.y,o=t.x-r.x,c=r.x*t.y-t.x*r.y,u=n*e.x+o*e.y+c,f=n*a.x+o*a.y+c,!(0!==u&&0!==f&&S(u,f)||(i=a.y-e.y,s=e.x-a.x,l=a.x*e.y-e.x*a.y,d=i*t.x+s*t.y+l,h=i*r.x+s*r.y+l,0!==d&&0!==h&&S(d,h)||0==(p=n*s-i*o))))return y=Math.abs(p/2),{x:(g=o*l-s*c)<0?(g-y)/p:(g+y)/p,y:(g=i*c-n*l)<0?(g-y)/p:(g+y)/p}}function S(t,r){return t*r>0}var E={node:function(t,r){return t.intersect(r)},circle:function(t,r,e){return k(t,r,r,e)},ellipse:k,polygon:function(t,r,e){var a=t.x,n=t.y,i=[],o=Number.POSITIVE_INFINITY,s=Number.POSITIVE_INFINITY;"function"==typeof r.forEach?r.forEach((function(t){o=Math.min(o,t.x),s=Math.min(s,t.y)})):(o=Math.min(o,r.x),s=Math.min(s,r.y));for(var c=a-t.width/2-o,l=n-t.height/2-s,d=0;d<r.length;d++){var h=r[d],u=r[d<r.length-1?d+1:0],f=L(t,e,{x:c+h.x,y:l+h.y},{x:c+u.x,y:l+u.y});f&&i.push(f)}return i.length?(i.length>1&&i.sort((function(t,r){var a=t.x-e.x,n=t.y-e.y,i=Math.sqrt(a*a+n*n),o=r.x-e.x,s=r.y-e.y,c=Math.sqrt(o*o+s*s);return i<c?-1:i===c?0:1})),i[0]):t},rect:e("h",(function(t,r){var e,a,n=t.x,i=t.y,o=r.x-n,s=r.y-i,c=t.width/2,l=t.height/2;return Math.abs(s)*c>Math.abs(o)*l?(s<0&&(l=-l),e=0===s?0:l*o/s,a=l):(o<0&&(c=-c),e=c,a=0===o?0:c*s/o),{x:n+e,y:i+a}}))},M=function(){var r=a(t().mark((function r(e,a){var n,i,o,s,l;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.useHtmlLabels||c().flowchart.htmlLabels||(a.centerLabel=!0),t.next=4,v(e,a,"node "+a.classes,!0);case 4:return n=t.sent,i=n.shapeSvg,o=n.bbox,s=n.halfPadding,u.info("Classes = ",a.classes),(l=i.insert("rect",":first-child")).attr("rx",a.rx).attr("ry",a.ry).attr("x",-o.width/2-s).attr("y",-o.height/2-s).attr("width",o.width+a.padding).attr("height",o.height+a.padding),x(a,l),a.intersect=function(t){return E.rect(a,t)},t.abrupt("return",i);case 14:case"end":return t.stop()}}),r)})));return function(t,e){return r.apply(this,arguments)}}(),T=M,B=function(){var r=a(t().mark((function r(e,a){var n,i,o,s,c,l,d,h;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v(e,a,void 0,!0);case 2:return n=t.sent,i=n.shapeSvg,o=n.bbox,s=o.width+a.padding,c=o.height+a.padding,d=[{x:(l=s+c)/2,y:0},{x:l,y:-l/2},{x:l/2,y:-l},{x:0,y:-l/2}],u.info("Question main (Circle)"),(h=m(i,l,l,d)).attr("style",a.style),x(a,h),a.intersect=function(t){return u.warn("Intersect called"),E.polygon(a,d,t)},t.abrupt("return",i);case 15:case"end":return t.stop()}}),r)})));return function(t,e){return r.apply(this,arguments)}}(),_=function(){var r=a(t().mark((function r(e,a){var n,i,o,s,c,l,d,h;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v(e,a,void 0,!0);case 2:return n=t.sent,i=n.shapeSvg,o=n.bbox,4,s=o.height+a.padding,c=s/4,l=o.width+2*c+a.padding,(h=m(i,l,s,d=[{x:c,y:0},{x:l-c,y:0},{x:l,y:-s/2},{x:l-c,y:-s},{x:c,y:-s},{x:0,y:-s/2}])).attr("style",a.style),x(a,h),a.intersect=function(t){return E.polygon(a,d,t)},t.abrupt("return",i);case 15:case"end":return t.stop()}}),r)})));return function(t,e){return r.apply(this,arguments)}}(),C=function(){var r=a(t().mark((function r(e,a){var n,i,o,s,c,l;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v(e,a,void 0,!0);case 2:return n=t.sent,i=n.shapeSvg,o=n.bbox,s=o.width+a.padding,c=o.height+a.padding,m(i,s,c,l=[{x:-c/2,y:0},{x:s,y:0},{x:s,y:-c},{x:-c/2,y:-c},{x:0,y:-c/2}]).attr("style",a.style),a.width=s+c,a.height=c,a.intersect=function(t){return E.polygon(a,l,t)},t.abrupt("return",i);case 14:case"end":return t.stop()}}),r)})));return function(t,e){return r.apply(this,arguments)}}(),P=function(){var r=a(t().mark((function r(e,a){var n,i,o,s,c,l,d;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v(e,a,void 0,!0);case 2:return n=t.sent,i=n.shapeSvg,o=n.bbox,s=o.width+a.padding,c=o.height+a.padding,(d=m(i,s,c,l=[{x:-2*c/6,y:0},{x:s-c/6,y:0},{x:s+2*c/6,y:-c},{x:c/6,y:-c}])).attr("style",a.style),x(a,d),a.intersect=function(t){return E.polygon(a,l,t)},t.abrupt("return",i);case 13:case"end":return t.stop()}}),r)})));return function(t,e){return r.apply(this,arguments)}}(),j=function(){var r=a(t().mark((function r(e,a){var n,i,o,s,c,l,d;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v(e,a,void 0,!0);case 2:return n=t.sent,i=n.shapeSvg,o=n.bbox,s=o.width+a.padding,c=o.height+a.padding,(d=m(i,s,c,l=[{x:2*c/6,y:0},{x:s+c/6,y:0},{x:s-2*c/6,y:-c},{x:-c/6,y:-c}])).attr("style",a.style),x(a,d),a.intersect=function(t){return E.polygon(a,l,t)},t.abrupt("return",i);case 13:case"end":return t.stop()}}),r)})));return function(t,e){return r.apply(this,arguments)}}(),I=function(){var r=a(t().mark((function r(e,a){var n,i,o,s,c,l,d;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v(e,a,void 0,!0);case 2:return n=t.sent,i=n.shapeSvg,o=n.bbox,s=o.width+a.padding,c=o.height+a.padding,(d=m(i,s,c,l=[{x:-2*c/6,y:0},{x:s+2*c/6,y:0},{x:s-c/6,y:-c},{x:c/6,y:-c}])).attr("style",a.style),x(a,d),a.intersect=function(t){return E.polygon(a,l,t)},t.abrupt("return",i);case 13:case"end":return t.stop()}}),r)})));return function(t,e){return r.apply(this,arguments)}}(),O=function(){var r=a(t().mark((function r(e,a){var n,i,o,s,c,l,d;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v(e,a,void 0,!0);case 2:return n=t.sent,i=n.shapeSvg,o=n.bbox,s=o.width+a.padding,c=o.height+a.padding,(d=m(i,s,c,l=[{x:c/6,y:0},{x:s-c/6,y:0},{x:s+2*c/6,y:-c},{x:-2*c/6,y:-c}])).attr("style",a.style),x(a,d),a.intersect=function(t){return E.polygon(a,l,t)},t.abrupt("return",i);case 13:case"end":return t.stop()}}),r)})));return function(t,e){return r.apply(this,arguments)}}(),N=function(){var r=a(t().mark((function r(e,a){var n,i,o,s,c,l,d;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v(e,a,void 0,!0);case 2:return n=t.sent,i=n.shapeSvg,o=n.bbox,s=o.width+a.padding,c=o.height+a.padding,(d=m(i,s,c,l=[{x:0,y:0},{x:s+c/2,y:0},{x:s,y:-c/2},{x:s+c/2,y:-c},{x:0,y:-c}])).attr("style",a.style),x(a,d),a.intersect=function(t){return E.polygon(a,l,t)},t.abrupt("return",i);case 13:case"end":return t.stop()}}),r)})));return function(t,e){return r.apply(this,arguments)}}(),R=function(){var r=a(t().mark((function r(e,a){var n,i,o,s,c,l,d,h,u;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v(e,a,void 0,!0);case 2:return n=t.sent,i=n.shapeSvg,o=n.bbox,s=o.width+a.padding,l=(c=s/2)/(2.5+s/50),d=o.height+l+a.padding,h="M 0,"+l+" a "+c+","+l+" 0,0,0 "+s+" 0 a "+c+","+l+" 0,0,0 "+-s+" 0 l 0,"+d+" a "+c+","+l+" 0,0,0 "+s+" 0 l 0,"+-d,u=i.attr("label-offset-y",l).insert("path",":first-child").attr("style",a.style).attr("d",h).attr("transform","translate("+-s/2+","+-(d/2+l)+")"),x(a,u),a.intersect=function(t){var r=E.rect(a,t),e=r.x-a.x;if(0!=c&&(Math.abs(e)<a.width/2||Math.abs(e)==a.width/2&&Math.abs(r.y-a.y)>a.height/2-l)){var n=l*l*(1-e*e/(c*c));0!=n&&(n=Math.sqrt(n)),n=l-n,t.y-a.y>0&&(n=-n),r.y+=n}return r},t.abrupt("return",i);case 14:case"end":return t.stop()}}),r)})));return function(t,e){return r.apply(this,arguments)}}(),A=function(){var r=a(t().mark((function r(e,a){var n,i,o,s,c,l,d,h;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v(e,a,"node "+a.classes,!0);case 2:return n=t.sent,i=n.shapeSvg,o=n.bbox,s=n.halfPadding,c=i.insert("rect",":first-child"),l=o.width+a.padding,d=o.height+a.padding,c.attr("class","basic label-container").attr("style",a.style).attr("rx",a.rx).attr("ry",a.ry).attr("x",-o.width/2-s).attr("y",-o.height/2-s).attr("width",l).attr("height",d),a.props&&(h=new Set(Object.keys(a.props)),a.props.borders&&(Y(c,a.props.borders,l,d),h.delete("borders")),h.forEach((function(t){u.warn("Unknown node property ".concat(t))}))),x(a,c),a.intersect=function(t){return E.rect(a,t)},t.abrupt("return",i);case 14:case"end":return t.stop()}}),r)})));return function(t,e){return r.apply(this,arguments)}}(),H=function(){var r=a(t().mark((function r(e,a){var n,i,o,s;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v(e,a,"label",!0);case 2:return n=t.sent,i=n.shapeSvg,u.trace("Classes = ",a.classes),o=i.insert("rect",":first-child"),0,0,o.attr("width",0).attr("height",0),i.attr("class","label edgeLabel"),a.props&&(s=new Set(Object.keys(a.props)),a.props.borders&&(Y(o,a.props.borders,0,0),s.delete("borders")),s.forEach((function(t){u.warn("Unknown node property ".concat(t))}))),x(a,o),a.intersect=function(t){return E.rect(a,t)},t.abrupt("return",i);case 14:case"end":return t.stop()}}),r)})));return function(t,e){return r.apply(this,arguments)}}();function Y(t,r,e,a){var n=[],i=function(t){n.push(t,0)},o=function(t){n.push(0,t)};r.includes("t")?(u.debug("add top border"),i(e)):o(e),r.includes("r")?(u.debug("add right border"),i(a)):o(a),r.includes("b")?(u.debug("add bottom border"),i(e)):o(e),r.includes("l")?(u.debug("add left border"),i(a)):o(a),t.attr("stroke-dasharray",n.join(" "))}var W=function(){var r=a(t().mark((function r(e,a){var n,i,o,s,c,l;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v(e,a,void 0,!0);case 2:return n=t.sent,i=n.shapeSvg,o=n.bbox,s=o.height+a.padding,c=o.width+s/4+a.padding,l=i.insert("rect",":first-child").attr("style",a.style).attr("rx",s/2).attr("ry",s/2).attr("x",-c/2).attr("y",-s/2).attr("width",c).attr("height",s),x(a,l),a.intersect=function(t){return E.rect(a,t)},t.abrupt("return",i);case 11:case"end":return t.stop()}}),r)})));return function(t,e){return r.apply(this,arguments)}}(),X=function(){var r=a(t().mark((function r(e,a){var n,i,o,s,c;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v(e,a,void 0,!0);case 2:return n=t.sent,i=n.shapeSvg,o=n.bbox,s=n.halfPadding,(c=i.insert("circle",":first-child")).attr("style",a.style).attr("rx",a.rx).attr("ry",a.ry).attr("r",o.width/2+s).attr("width",o.width+a.padding).attr("height",o.height+a.padding),u.info("Circle main"),x(a,c),a.intersect=function(t){return u.info("Circle intersect",a,o.width/2+s,t),E.circle(a,o.width/2+s,t)},t.abrupt("return",i);case 12:case"end":return t.stop()}}),r)})));return function(t,e){return r.apply(this,arguments)}}(),D=function(){var r=a(t().mark((function r(e,a){var n,i,o,s,c,l,d;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v(e,a,void 0,!0);case 2:return n=t.sent,i=n.shapeSvg,o=n.bbox,s=n.halfPadding,5,c=i.insert("g",":first-child"),l=c.insert("circle"),d=c.insert("circle"),l.attr("style",a.style).attr("rx",a.rx).attr("ry",a.ry).attr("r",o.width/2+s+5).attr("width",o.width+a.padding+10).attr("height",o.height+a.padding+10),d.attr("style",a.style).attr("rx",a.rx).attr("ry",a.ry).attr("r",o.width/2+s).attr("width",o.width+a.padding).attr("height",o.height+a.padding),u.info("DoubleCircle main"),x(a,l),a.intersect=function(t){return u.info("DoubleCircle intersect",a,o.width/2+s+5,t),E.circle(a,o.width/2+s+5,t)},t.abrupt("return",i);case 16:case"end":return t.stop()}}),r)})));return function(t,e){return r.apply(this,arguments)}}(),U=function(){var r=a(t().mark((function r(e,a){var n,i,o,s,c,l,d;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v(e,a,void 0,!0);case 2:return n=t.sent,i=n.shapeSvg,o=n.bbox,s=o.width+a.padding,c=o.height+a.padding,(d=m(i,s,c,l=[{x:0,y:0},{x:s,y:0},{x:s,y:-c},{x:0,y:-c},{x:0,y:0},{x:-8,y:0},{x:s+8,y:0},{x:s+8,y:-c},{x:-8,y:-c},{x:-8,y:0}])).attr("style",a.style),x(a,d),a.intersect=function(t){return E.polygon(a,l,t)},t.abrupt("return",i);case 13:case"end":return t.stop()}}),r)})));return function(t,e){return r.apply(this,arguments)}}(),Z=function(t,r,e){var a=t.insert("g").attr("class","node default").attr("id",r.domId||r.id),n=70,i=10;"LR"===e&&(n=10,i=70);var o=a.append("rect").attr("x",-1*n/2).attr("y",-1*i/2).attr("width",n).attr("height",i).attr("class","fork-join");return x(r,o),r.height=r.height+r.padding/2,r.width=r.width+r.padding/2,r.intersect=function(t){return E.rect(r,t)},a},F={rhombus:B,question:B,rect:A,labelRect:H,rectWithTitle:function(t,r){var e;e=r.classes?"node "+r.classes:"node default";var a=t.insert("g").attr("class",e).attr("id",r.domId||r.id),n=a.insert("rect",":first-child"),i=a.insert("line"),l=a.insert("g").attr("class","label"),d=r.labelText.flat?r.labelText.flat():r.labelText,f="";f="object"===o(d)?d[0]:d,u.info("Label text abc79",f,d,"object"===o(d));var p=l.node().appendChild(w(f,r.labelStyle,!0,!0)),y={width:0,height:0};if(s(c().flowchart.htmlLabels)){var g=p.children[0],b=h(p);y=g.getBoundingClientRect(),b.attr("width",y.width),b.attr("height",y.height)}u.info("Text 2",d);var v=d.slice(1,d.length),m=p.getBBox(),k=l.node().appendChild(w(v.join?v.join("<br/>"):v,r.labelStyle,!0,!0));if(s(c().flowchart.htmlLabels)){var L=k.children[0],S=h(k);y=L.getBoundingClientRect(),S.attr("width",y.width),S.attr("height",y.height)}var M=r.padding/2;return h(k).attr("transform","translate( "+(y.width>m.width?0:(m.width-y.width)/2)+", "+(m.height+M+5)+")"),h(p).attr("transform","translate( "+(y.width<m.width?0:-(m.width-y.width)/2)+", 0)"),y=l.node().getBBox(),l.attr("transform","translate("+-y.width/2+", "+(-y.height/2-M+3)+")"),n.attr("class","outer title-state").attr("x",-y.width/2-M).attr("y",-y.height/2-M).attr("width",y.width+r.padding).attr("height",y.height+r.padding),i.attr("class","divider").attr("x1",-y.width/2-M).attr("x2",y.width/2+M).attr("y1",-y.height/2-M+m.height+M).attr("y2",-y.height/2-M+m.height+M),x(r,n),r.intersect=function(t){return E.rect(r,t)},a},choice:function(t,r){var e=t.insert("g").attr("class","node default").attr("id",r.domId||r.id),a=[{x:0,y:14},{x:14,y:0},{x:0,y:-14},{x:-14,y:0}];return e.insert("polygon",":first-child").attr("points",a.map((function(t){return t.x+","+t.y})).join(" ")).attr("class","state-start").attr("r",7).attr("width",28).attr("height",28),r.width=28,r.height=28,r.intersect=function(t){return E.circle(r,14,t)},e},circle:X,doublecircle:D,stadium:W,hexagon:_,rect_left_inv_arrow:C,lean_right:P,lean_left:j,trapezoid:I,inv_trapezoid:O,rect_right_inv_arrow:N,cylinder:R,start:function(t,r){var e=t.insert("g").attr("class","node default").attr("id",r.domId||r.id),a=e.insert("circle",":first-child");return a.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),x(r,a),r.intersect=function(t){return E.circle(r,7,t)},e},end:function(t,r){var e=t.insert("g").attr("class","node default").attr("id",r.domId||r.id),a=e.insert("circle",":first-child"),n=e.insert("circle",":first-child");return n.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),a.attr("class","state-end").attr("r",5).attr("width",10).attr("height",10),x(r,n),r.intersect=function(t){return E.circle(r,7,t)},e},note:T,subroutine:U,fork:Z,join:Z,class_box:function(t,r){var e,a=r.padding/2;e=r.classes?"node "+r.classes:"node default";var n=t.insert("g").attr("class",e).attr("id",r.domId||r.id),i=n.insert("rect",":first-child"),o=n.insert("line"),l=n.insert("line"),d=0,u=4,f=n.insert("g").attr("class","label"),p=0,y=r.classData.annotations&&r.classData.annotations[0],b=r.classData.annotations[0]?"«"+r.classData.annotations[0]+"»":"",v=f.node().appendChild(w(b,r.labelStyle,!0,!0)),m=v.getBBox();if(s(c().flowchart.htmlLabels)){var k=v.children[0],L=h(v);m=k.getBoundingClientRect(),L.attr("width",m.width),L.attr("height",m.height)}r.classData.annotations[0]&&(u+=m.height+4,d+=m.width);var S=r.classData.label;void 0!==r.classData.type&&""!==r.classData.type&&(c().flowchart.htmlLabels?S+="&lt;"+r.classData.type+"&gt;":S+="<"+r.classData.type+">");var M=f.node().appendChild(w(S,r.labelStyle,!0,!0));h(M).attr("class","classTitle");var T=M.getBBox();if(s(c().flowchart.htmlLabels)){var B=M.children[0],_=h(M);T=B.getBoundingClientRect(),_.attr("width",T.width),_.attr("height",T.height)}u+=T.height+4,T.width>d&&(d=T.width);var C=[];r.classData.members.forEach((function(t){var e=g(t),a=e.displayText;c().flowchart.htmlLabels&&(a=a.replace(/</g,"&lt;").replace(/>/g,"&gt;"));var n=f.node().appendChild(w(a,e.cssStyle?e.cssStyle:r.labelStyle,!0,!0)),i=n.getBBox();if(s(c().flowchart.htmlLabels)){var o=n.children[0],l=h(n);i=o.getBoundingClientRect(),l.attr("width",i.width),l.attr("height",i.height)}i.width>d&&(d=i.width),u+=i.height+4,C.push(n)})),u+=8;var P=[];if(r.classData.methods.forEach((function(t){var e=g(t),a=e.displayText;c().flowchart.htmlLabels&&(a=a.replace(/</g,"&lt;").replace(/>/g,"&gt;"));var n=f.node().appendChild(w(a,e.cssStyle?e.cssStyle:r.labelStyle,!0,!0)),i=n.getBBox();if(s(c().flowchart.htmlLabels)){var o=n.children[0],l=h(n);i=o.getBoundingClientRect(),l.attr("width",i.width),l.attr("height",i.height)}i.width>d&&(d=i.width),u+=i.height+4,P.push(n)})),u+=8,y){var j=(d-m.width)/2;h(v).attr("transform","translate( "+(-1*d/2+j)+", "+-1*u/2+")"),p=m.height+4}var I=(d-T.width)/2;return h(M).attr("transform","translate( "+(-1*d/2+I)+", "+(-1*u/2+p)+")"),p+=T.height+4,o.attr("class","divider").attr("x1",-d/2-a).attr("x2",d/2+a).attr("y1",-u/2-a+8+p).attr("y2",-u/2-a+8+p),p+=8,C.forEach((function(t){h(t).attr("transform","translate( "+-d/2+", "+(-1*u/2+p+4)+")"),p+=T.height+4})),p+=8,l.attr("class","divider").attr("x1",-d/2-a).attr("x2",d/2+a).attr("y1",-u/2-a+8+p).attr("y2",-u/2-a+8+p),p+=8,P.forEach((function(t){h(t).attr("transform","translate( "+-d/2+", "+(-1*u/2+p)+")"),p+=T.height+4})),i.attr("class","outer title-state").attr("x",-d/2-a).attr("y",-u/2-a).attr("width",d+r.padding).attr("height",u+r.padding),x(r,i),r.intersect=function(t){return E.rect(r,t)},n}},G={},q=(e("a",function(){var r=a(t().mark((function r(e,a,n){var i,o,s;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a.link){t.next=8;break}return"sandbox"===c().securityLevel?s="_top":a.linkTarget&&(s=a.linkTarget||"_blank"),i=e.insert("svg:a").attr("xlink:href",a.link).attr("target",s),t.next=5,F[a.shape](i,a,n);case 5:o=t.sent,t.next=12;break;case 8:return t.next=10,F[a.shape](e,a,n);case 10:o=t.sent,i=o;case 12:return a.tooltip&&o.attr("title",a.tooltip),a.class&&o.attr("class","node default "+a.class),G[a.id]=i,a.haveCallback&&G[a.id].attr("class",G[a.id].attr("class")+" clickable"),t.abrupt("return",i);case 17:case"end":return t.stop()}}),r)})));return function(t,e,a){return r.apply(this,arguments)}}()),e("s",(function(t,r){G[r.id]=t})),e("e",(function(){G={}})),e("p",(function(t){var r=G[t.id];u.trace("Transforming node",t.diff,t,"translate("+(t.x-t.width/2-5)+", "+t.width/2+")");var e=t.diff||0;return t.clusterNode?r.attr("transform","translate("+(t.x+e-t.width/2)+", "+(t.y-t.height/2-8)+")"):r.attr("transform","translate("+t.x+", "+t.y+")"),e})),{}),z={};e("f",(function(){q={},z={}})),e("b",(function(t,r){var e=s(c().flowchart.htmlLabels),a="markdown"===r.labelType?y(t,r.label,{style:r.labelStyle,useHtmlLabels:e,addSvgBackground:!0}):w(r.label,r.labelStyle);u.info("abc82",r,r.labelType);var n=t.insert("g").attr("class","edgeLabel"),i=n.insert("g").attr("class","label");i.node().appendChild(a);var o,l=a.getBBox();if(e){var d=a.children[0],f=h(a);l=d.getBoundingClientRect(),f.attr("width",l.width),f.attr("height",l.height)}if(i.attr("transform","translate("+-l.width/2+", "+-l.height/2+")"),q[r.id]=n,r.width=l.width,r.height=l.height,r.startLabelLeft){var p=w(r.startLabelLeft,r.labelStyle),g=t.insert("g").attr("class","edgeTerminals"),b=g.insert("g").attr("class","inner");o=b.node().appendChild(p);var v=p.getBBox();b.attr("transform","translate("+-v.width/2+", "+-v.height/2+")"),z[r.id]||(z[r.id]={}),z[r.id].startLeft=g,V(o,r.startLabelLeft)}if(r.startLabelRight){var x=w(r.startLabelRight,r.labelStyle),m=t.insert("g").attr("class","edgeTerminals"),k=m.insert("g").attr("class","inner");o=m.node().appendChild(x),k.node().appendChild(x);var L=x.getBBox();k.attr("transform","translate("+-L.width/2+", "+-L.height/2+")"),z[r.id]||(z[r.id]={}),z[r.id].startRight=m,V(o,r.startLabelRight)}if(r.endLabelLeft){var S=w(r.endLabelLeft,r.labelStyle),E=t.insert("g").attr("class","edgeTerminals"),M=E.insert("g").attr("class","inner");o=M.node().appendChild(S);var T=S.getBBox();M.attr("transform","translate("+-T.width/2+", "+-T.height/2+")"),E.node().appendChild(S),z[r.id]||(z[r.id]={}),z[r.id].endLeft=E,V(o,r.endLabelLeft)}if(r.endLabelRight){var B=w(r.endLabelRight,r.labelStyle),_=t.insert("g").attr("class","edgeTerminals"),C=_.insert("g").attr("class","inner");o=C.node().appendChild(B);var P=B.getBBox();C.attr("transform","translate("+-P.width/2+", "+-P.height/2+")"),_.node().appendChild(B),z[r.id]||(z[r.id]={}),z[r.id].endRight=_,V(o,r.endLabelRight)}return a}));function V(t,r){c().flowchart.htmlLabels&&t&&(t.style.width=9*r.length+"px",t.style.height="12px")}e("d",(function(t,r){u.info("Moving label abc78 ",t.id,t.label,q[t.id]);var e=r.updatedPath?r.updatedPath:r.originalPath;if(t.label){var a=q[t.id],n=t.x,i=t.y;if(e){var o=f.calcLabelPosition(e);u.info("Moving label "+t.label+" from (",n,",",i,") to (",o.x,",",o.y,") abc78"),r.updatedPath&&(n=o.x,i=o.y)}a.attr("transform","translate("+n+", "+i+")")}if(t.startLabelLeft){var s=z[t.id].startLeft,c=t.x,l=t.y;if(e){var d=f.calcTerminalLabelPosition(t.arrowTypeStart?10:0,"start_left",e);c=d.x,l=d.y}s.attr("transform","translate("+c+", "+l+")")}if(t.startLabelRight){var h=z[t.id].startRight,p=t.x,y=t.y;if(e){var g=f.calcTerminalLabelPosition(t.arrowTypeStart?10:0,"start_right",e);p=g.x,y=g.y}h.attr("transform","translate("+p+", "+y+")")}if(t.endLabelLeft){var b=z[t.id].endLeft,w=t.x,v=t.y;if(e){var x=f.calcTerminalLabelPosition(t.arrowTypeEnd?10:0,"end_left",e);w=x.x,v=x.y}b.attr("transform","translate("+w+", "+v+")")}if(t.endLabelRight){var m=z[t.id].endRight,k=t.x,L=t.y;if(e){var S=f.calcTerminalLabelPosition(t.arrowTypeEnd?10:0,"end_right",e);k=S.x,L=S.y}m.attr("transform","translate("+k+", "+L+")")}}));var Q=function(t,r){u.warn("abc88 cutPathAtIntersect",t,r);var e=[],a=t[0],n=!1;return t.forEach((function(t){if(u.info("abc88 checking point",t,r),function(t,r){var e=t.x,a=t.y,n=Math.abs(r.x-e),i=Math.abs(r.y-a),o=t.width/2,s=t.height/2;return n>=o||i>=s}(r,t)||n)u.warn("abc88 outside",t,a),a=t,n||e.push(t);else{var i=function(t,r,e){u.warn("intersection calc abc89:\n  outsidePoint: ".concat(JSON.stringify(r),"\n  insidePoint : ").concat(JSON.stringify(e),"\n  node        : x:").concat(t.x," y:").concat(t.y," w:").concat(t.width," h:").concat(t.height));var a=t.x,n=t.y,i=Math.abs(a-e.x),o=t.width/2,s=e.x<r.x?o-i:o+i,c=t.height/2,l=Math.abs(r.y-e.y),d=Math.abs(r.x-e.x);if(Math.abs(n-r.y)*o>Math.abs(a-r.x)*c){var h=e.y<r.y?r.y-c-n:n-c-r.y;s=d*h/l;var f={x:e.x<r.x?e.x+s:e.x-d+s,y:e.y<r.y?e.y+l-h:e.y-l+h};return 0===s&&(f.x=r.x,f.y=r.y),0===d&&(f.x=r.x),0===l&&(f.y=r.y),u.warn("abc89 topp/bott calc, Q ".concat(l,", q ").concat(h,", R ").concat(d,", r ").concat(s),f),f}var p=l*(s=e.x<r.x?r.x-o-a:a-o-r.x)/d,y=e.x<r.x?e.x+d-s:e.x-d+s,g=e.y<r.y?e.y+p:e.y-p;return u.warn("sides calc abc89, Q ".concat(l,", q ").concat(p,", R ").concat(d,", r ").concat(s),{_x:y,_y:g}),0===s&&(y=r.x,g=r.y),0===d&&(y=r.x),0===l&&(g=r.y),{x:y,y:g}}(r,a,t);u.warn("abc88 inside",t,a,i),u.warn("abc88 intersection",i);var o=!1;e.forEach((function(t){o=o||t.x===i.x&&t.y===i.y})),e.some((function(t){return t.x===i.x&&t.y===i.y}))?u.warn("abc88 no intersect",i,e):e.push(i),n=!0}})),u.warn("abc88 returning points",e),e};e("c",(function(t,r,e,a,n,i){var o=e.points,s=!1,l=i.node(r.v),d=i.node(r.w);u.info("abc88 InsertEdge: ",e),d.intersect&&l.intersect&&((o=o.slice(1,e.points.length-1)).unshift(l.intersect(o[0])),u.info("Last point",o[o.length-1],d,d.intersect(o[o.length-1])),o.push(d.intersect(o[o.length-1]))),e.toCluster&&(u.info("to cluster abc88",a[e.toCluster]),o=Q(e.points,a[e.toCluster].node),s=!0),e.fromCluster&&(u.info("from cluster abc88",a[e.fromCluster]),o=Q(o.reverse(),a[e.fromCluster].node).reverse(),s=!0);var h,f=o.filter((function(t){return!Number.isNaN(t.y)}));h=("graph"===n||"flowchart"===n)&&e.curve||p;var y,g=b().x((function(t){return t.x})).y((function(t){return t.y})).curve(h);switch(e.thickness){case"normal":y="edge-thickness-normal";break;case"thick":case"invisible":y="edge-thickness-thick";break;default:y=""}switch(e.pattern){case"solid":y+=" edge-pattern-solid";break;case"dotted":y+=" edge-pattern-dotted";break;case"dashed":y+=" edge-pattern-dashed"}var w=t.append("path").attr("d",g(f)).attr("id",e.id).attr("class"," "+y+(e.classes?" "+e.classes:"")).attr("style",e.style),v="";switch((c().flowchart.arrowMarkerAbsolute||c().state.arrowMarkerAbsolute)&&(v=(v=(v=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search).replace(/\(/g,"\\(")).replace(/\)/g,"\\)")),u.info("arrowTypeStart",e.arrowTypeStart),u.info("arrowTypeEnd",e.arrowTypeEnd),e.arrowTypeStart){case"arrow_cross":w.attr("marker-start","url("+v+"#"+n+"-crossStart)");break;case"arrow_point":w.attr("marker-start","url("+v+"#"+n+"-pointStart)");break;case"arrow_barb":w.attr("marker-start","url("+v+"#"+n+"-barbStart)");break;case"arrow_circle":w.attr("marker-start","url("+v+"#"+n+"-circleStart)");break;case"aggregation":w.attr("marker-start","url("+v+"#"+n+"-aggregationStart)");break;case"extension":w.attr("marker-start","url("+v+"#"+n+"-extensionStart)");break;case"composition":w.attr("marker-start","url("+v+"#"+n+"-compositionStart)");break;case"dependency":w.attr("marker-start","url("+v+"#"+n+"-dependencyStart)");break;case"lollipop":w.attr("marker-start","url("+v+"#"+n+"-lollipopStart)")}switch(e.arrowTypeEnd){case"arrow_cross":w.attr("marker-end","url("+v+"#"+n+"-crossEnd)");break;case"arrow_point":w.attr("marker-end","url("+v+"#"+n+"-pointEnd)");break;case"arrow_barb":w.attr("marker-end","url("+v+"#"+n+"-barbEnd)");break;case"arrow_circle":w.attr("marker-end","url("+v+"#"+n+"-circleEnd)");break;case"aggregation":w.attr("marker-end","url("+v+"#"+n+"-aggregationEnd)");break;case"extension":w.attr("marker-end","url("+v+"#"+n+"-extensionEnd)");break;case"composition":w.attr("marker-end","url("+v+"#"+n+"-compositionEnd)");break;case"dependency":w.attr("marker-end","url("+v+"#"+n+"-dependencyEnd)");break;case"lollipop":w.attr("marker-end","url("+v+"#"+n+"-lollipopEnd)")}var x={};return s&&(x.updatedPath=o),x.originalPath=e.points,x}))}}}))}();
