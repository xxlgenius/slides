System.register(["./index-legacy-052b3898.js","./line-53c588d2-legacy-e2d79c27.js"],(function(t,e){"use strict";var a,i,r,n,d;return{setters:[function(t){a=t.aS,i=t.aK,r=t.ay,n=t.aT},function(t){d=t.l}],execute:function(){var e=0,s=function(t){var e=t.id;return t.type&&(e+="<"+t.type+">"),e},l=t("p",(function(t){var e="",a="",i="",r="",d=t.substring(0,1),s=t.substring(t.length-1,t.length);d.match(/[#+~-]/)&&(r=d);var l=/[\s\w)~]/;s.match(l)||(a=g(s));var o=""===r?0:1,p=""===a?t.length:t.length-1,c=(t=t.substring(o,p)).indexOf("("),h=t.indexOf(")");if(c>1&&h>c&&h<=t.length){var x=t.substring(0,c).trim(),u=t.substring(c+1,h);if(e=r+x+"("+n(u.trim())+")",h<t.length){var y=t.substring(h+1,h+2);""!==a||y.match(l)?i=t.substring(h+1).trim():(a=g(y),i=t.substring(h+2).trim()),""!==i&&(":"===i.charAt(0)&&(i=i.substring(1).trim()),e+=i=" : "+n(i))}}else e=r+n(t);return{displayText:e,cssStyle:a}})),o=function(t,e,a,i){var r=l(e),n=t.append("tspan").attr("x",i.padding).text(r.displayText);""!==r.cssStyle&&n.attr("style",r.cssStyle),a||n.attr("dy",i.textHeight)},g=function(t){switch(t){case"*":return"font-style:italic;";case"$":return"text-decoration:underline;";default:return""}};t("s",{getClassTitleString:s,drawClass:function(t,e,a,i){r.debug("Rendering class ",e,a);var n,d=e.id,l={id:d,label:e.id,width:0,height:0},g=t.append("g").attr("id",i.db.lookUpDomId(d)).attr("class","classGroup");n=e.link?g.append("svg:a").attr("xlink:href",e.link).attr("target",e.linkTarget).append("text").attr("y",a.textHeight+a.padding).attr("x",0):g.append("text").attr("y",a.textHeight+a.padding).attr("x",0);var p=!0;e.annotations.forEach((function(t){var e=n.append("tspan").text("«"+t+"»");p||e.attr("dy",a.textHeight),p=!1}));var c=s(e),h=n.append("tspan").text(c).attr("class","title");p||h.attr("dy",a.textHeight);var x=n.node().getBBox().height,u=g.append("line").attr("x1",0).attr("y1",a.padding+x+a.dividerMargin/2).attr("y2",a.padding+x+a.dividerMargin/2),y=g.append("text").attr("x",a.padding).attr("y",x+a.dividerMargin+a.textHeight).attr("fill","white").attr("class","classText");p=!0,e.members.forEach((function(t){o(y,t,p,a),p=!1}));var f=y.node().getBBox(),v=g.append("line").attr("x1",0).attr("y1",a.padding+x+a.dividerMargin+f.height).attr("y2",a.padding+x+a.dividerMargin+f.height),b=g.append("text").attr("x",a.padding).attr("y",x+2*a.dividerMargin+f.height+a.textHeight).attr("fill","white").attr("class","classText");p=!0,e.methods.forEach((function(t){o(b,t,p,a),p=!1}));var w=g.node().getBBox(),T=" ";e.cssClasses.length>0&&(T+=e.cssClasses.join(" "));var m=g.insert("rect",":first-child").attr("x",0).attr("y",0).attr("width",w.width+2*a.padding).attr("height",w.height+a.padding+.5*a.dividerMargin).attr("class",T).node().getBBox().width;return n.node().childNodes.forEach((function(t){t.setAttribute("x",(m-t.getBBox().width)/2)})),e.tooltip&&n.insert("title").text(e.tooltip),u.attr("x2",m),v.attr("x2",m),l.width=m,l.height=w.height+a.padding+.5*a.dividerMargin,l},drawEdge:function(t,n,s,l,o){var g=function(t){switch(t){case o.db.relationType.AGGREGATION:return"aggregation";case o.db.relationType.EXTENSION:return"extension";case o.db.relationType.COMPOSITION:return"composition";case o.db.relationType.DEPENDENCY:return"dependency";case o.db.relationType.LOLLIPOP:return"lollipop"}};n.points=n.points.filter((function(t){return!Number.isNaN(t.y)}));var p,c,h=n.points,x=d().x((function(t){return t.x})).y((function(t){return t.y})).curve(a),u=t.append("path").attr("d",x(h)).attr("id","edge"+e).attr("class","relation"),y="";l.arrowMarkerAbsolute&&(y=(y=(y=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search).replace(/\(/g,"\\(")).replace(/\)/g,"\\)")),1==s.relation.lineType&&u.attr("class","relation dashed-line"),10==s.relation.lineType&&u.attr("class","relation dotted-line"),"none"!==s.relation.type1&&u.attr("marker-start","url("+y+"#"+g(s.relation.type1)+"Start)"),"none"!==s.relation.type2&&u.attr("marker-end","url("+y+"#"+g(s.relation.type2)+"End)");var f,v,b,w,T=n.points.length,m=i.calcLabelPosition(n.points);if(p=m.x,c=m.y,T%2!=0&&T>1){var B=i.calcCardinalityPosition("none"!==s.relation.type1,n.points,n.points[0]),N=i.calcCardinalityPosition("none"!==s.relation.type2,n.points,n.points[T-1]);r.debug("cardinality_1_point "+JSON.stringify(B)),r.debug("cardinality_2_point "+JSON.stringify(N)),f=B.x,v=B.y,b=N.x,w=N.y}if(void 0!==s.title){var E=t.append("g").attr("class","classLabel"),M=E.append("text").attr("class","label").attr("x",p).attr("y",c).attr("fill","red").attr("text-anchor","middle").text(s.title);window.label=M;var O=M.node().getBBox();E.insert("rect",":first-child").attr("class","box").attr("x",O.x-l.padding/2).attr("y",O.y-l.padding/2).attr("width",O.width+l.padding).attr("height",O.height+l.padding)}r.info("Rendering relation "+JSON.stringify(s)),void 0!==s.relationTitle1&&"none"!==s.relationTitle1&&t.append("g").attr("class","cardinality").append("text").attr("class","type1").attr("x",f).attr("y",v).attr("fill","black").attr("font-size","6").text(s.relationTitle1),void 0!==s.relationTitle2&&"none"!==s.relationTitle2&&t.append("g").attr("class","cardinality").append("text").attr("class","type2").attr("x",b).attr("y",w).attr("fill","black").attr("font-size","6").text(s.relationTitle2),e++},drawNote:function(t,e,a,i){r.debug("Rendering note ",e,a);var n=e.id,d={id:n,text:e.text,width:0,height:0},s=t.append("g").attr("id",n).attr("class","classGroup"),l=s.append("text").attr("y",a.textHeight+a.padding).attr("x",0),o=JSON.parse('"'.concat(e.text,'"')).split("\n");o.forEach((function(t){r.debug("Adding line: ".concat(t)),l.append("tspan").text(t).attr("class","title").attr("dy",a.textHeight)}));var g=s.node().getBBox(),p=s.insert("rect",":first-child").attr("x",0).attr("y",0).attr("width",g.width+2*a.padding).attr("height",g.height+o.length*a.textHeight+a.padding+.5*a.dividerMargin).node().getBBox().width;return l.node().childNodes.forEach((function(t){t.setAttribute("x",(p-t.getBBox().width)/2)})),d.width=p,d.height=g.height+o.length*a.textHeight+a.padding+.5*a.dividerMargin,d},parseMember:l})}}}));
